!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("ngChatScroller",[],e):"object"==typeof exports?exports.ngChatScroller=e():t.ngChatScroller=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=r(1),i=n(c),s=function(){function t(e,r){o(this,t),this.scrollView=e,this.$log=r}return l(t,[{key:"startScrollBottom",value:function(){}},{key:"doScrollBottom",value:function(){this.scrollView.scrollTop=this.scrollView.scrollHeight}},{key:"startMaintainScroll",value:function(){return this.startScrollTopMax=this.scrollView.scrollTop,this.startScrollTopMax}},{key:"doMaintainScroll",value:function(){var t=this.scrollView.scrollHeight-this.startScrollHeight;return this.scrollView.scrollTop=this.startScrollTopMax+t}},{key:"startScroll",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=function(e,n){var o=Math.abs(r.scrollView.scrollHeight-r.startScrollHeight);return o!==e?(r["do"+t](),l(o,0)):n<=4||!r.endCurrentScroll?l(e,n+1):r["do"+t]()},l=function(t,e){return setTimeout(function(){return o(t,e)})};return this.scrollType=t,this.endCurrentScroll=n,this.shouldAnimate=e,this.startScrollHeight=this.scrollView.scrollHeight,this.startScrollTime=Date.now(),this["start"+t](),this["do"+t](),o(0,0)}},{key:"stopCurrentScroll",value:function(){return this["do"+this.scrollType](),this.endCurrentScroll=!0}}]),t}(),a=function(){function t(e,r,n,l){o(this,t),this.$log=l,this.$attrs=n,this.chatScroller=new s(r[0],l),this.messages=null,e.ngcsNumRendered=e.ngcsLimit=0,this.watches(e,n.chatScrollView)}return l(t,[{key:"getTrackByVal",value:function(t){return i.default.isEmpty(t)||i.default.isEmpty(this.$attrs.ngcsTrackBy)?t:t[this.$attrs.ngcsTrackBy]}},{key:"watches",value:function(t,e){var r=this;t.$watchCollection(e,function(e){null!==e&&i.default.size(e)!==t.ngcsLimit&&(r.getTrackByVal(i.default.last(r.messages))===r.getTrackByVal(i.default.last(e))?r.chatScroller.startScroll("MaintainScroll",!1):r.chatScroller.startScroll("ScrollBottom",t.ngcsNumRendered>0),r.messages=e,t.ngcsLimit=i.default.size(e))})}}]),t}();a.$inject=["$scope","$element","$attrs","$log"],angular.module("ngChatScroller",[]).directive("chatScrollView",["$log",function(t){return{restrict:"A",controller:a,link:function(t,e,r,n){var o=r.ngcsMessageSelector?r.ngcsMessageSelector:".chat-message";return t.$watch(function(){return e[0].querySelectorAll(o).length},function(e){e>0&&t.$evalAsync(function(){t.ngcsLimit===e&&(t.ngcsNumRendered=e,n.chatScroller.stopCurrentScroll())})})}}}])},function(t,e){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n={size:function(t){return t?t.length:0},last:function(t){if(t)return t[t.length-1]},isEmpty:function(t){return null==t||(Array.isArray(t)||"string"==typeof t?0===t.length:"object"===("undefined"==typeof t?"undefined":r(t))&&0===Object.keys(t).length)}};t.exports=n}])});
//# sourceMappingURL=ngChatScroller.min.js.map